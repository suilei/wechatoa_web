if(window.jQuery&&!window.jQuery.createTemplate){(function(jQuery){var Template=function(s,includes,settings){this._tree=[];this._param={};this._includes=null;this._templates={};this._templates_code={};this._maintemplate=null;this.settings=jQuery.extend({disallow_functions:false,filter_data:true,filter_params:false,runnable_functions:false,clone_data:true,clone_params:true},settings);this.f_cloneData=(this.settings.f_cloneData!==undefined)?(this.settings.f_cloneData):(TemplateUtils.cloneData);this.f_escapeString=(this.settings.f_escapeString!==undefined)?(this.settings.f_escapeString):(TemplateUtils.escapeHTML);this.f_parseJSON=(this.settings.f_parseJSON!==undefined)?(this.settings.f_parseJSON):((this.settings.disallow_functions)?(jQuery.parseJSON):(TemplateUtils.parseJSON));if(s==null){return }this.splitTemplates(s,includes);if(s){this.setTemplate(this._templates_code.MAIN,includes,this.settings,this)}this._templates_code=null};Template.prototype.version="0.8.1";Template.DEBUG_MODE=false;Template.FOREACH_LOOP_LIMIT=10000;Template.guid=0;Template.prototype.splitTemplates=function(s,includes){var reg=/\{#template *(\w+) *(.*?) *\}/g;var iter,tname,se;var lastIndex=null;var _template_settings=[];while((iter=reg.exec(s))!=null){lastIndex=reg.lastIndex;tname=iter[1];se=s.indexOf("{#/template "+tname+"}",lastIndex);if(se==-1){throw new Error('jTemplates: Template "'+tname+'" is not closed.')}this._templates_code[tname]=s.substring(lastIndex,se);_template_settings[tname]=TemplateUtils.optionToObject(iter[2])}if(lastIndex===null){this._templates_code.MAIN=s;return }for(var i in this._templates_code){if(i!="MAIN"){this._templates[i]=new Template()}}for(var i in this._templates_code){if(i!="MAIN"){this._templates[i].setTemplate(this._templates_code[i],jQuery.extend({},includes||{},this._templates||{}),jQuery.extend({},this.settings,_template_settings[i]),this);this._templates_code[i]=null}}};Template.prototype.setTemplate=function(s,includes,settings,maintemplate){if(s==undefined){this._tree.push(new TextNode("",1,this));return }s=s.replace(/[\n\r]/g,"");s=s.replace(/\{\*.*?\*\}/g,"");this._includes=jQuery.extend({},this._templates||{},includes||{});this.settings=new Object(settings);this._maintemplate=maintemplate;var node=this._tree;var op=s.match(/\{#.*?\}/g);var ss=0,se=0;var e;var literalMode=0;var elseif_level=0;for(var i=0,l=(op)?(op.length):(0);i<l;++i){var this_op=op[i];if(literalMode){se=s.indexOf("{#/literal}");if(se==-1){throw new Error("jTemplates: No end of literal.")}if(se>ss){node.push(new TextNode(s.substring(ss,se),1,this))}ss=se+11;literalMode=0;i=jQuery.inArray("{#/literal}",op);continue}se=s.indexOf(this_op,ss);if(se>ss){node.push(new TextNode(s.substring(ss,se),literalMode,this))}var ppp=this_op.match(/\{#([\w\/]+).*?\}/);var op_=RegExp.$1;switch(op_){case"elseif":++elseif_level;node.switchToElse();case"if":e=new opIF(this_op,node,this);node.push(e);node=e;break;case"else":node.switchToElse();break;case"/if":while(elseif_level){node=node.getParent();--elseif_level}case"/for":case"/foreach":node=node.getParent();break;case"foreach":e=new opFOREACH(this_op,node,this);node.push(e);node=e;break;case"for":e=opFORFactory(this_op,node,this);node.push(e);node=e;break;case"continue":case"break":node.push(new JTException(op_));break;case"include":node.push(new Include(this_op,this._includes,this));break;case"param":node.push(new UserParam(this_op,this));break;case"var":node.push(new UserVariable(this_op,this));break;case"cycle":node.push(new Cycle(this_op));break;case"ldelim":node.push(new TextNode("{",1,this));break;case"rdelim":node.push(new TextNode("}",1,this));break;case"literal":literalMode=1;break;case"/literal":if(Template.DEBUG_MODE){throw new Error("jTemplates: Missing begin of literal.")}break;default:if(Template.DEBUG_MODE){throw new Error("jTemplates: unknown tag: "+op_+".")}}ss=se+this_op.length}if(s.length>ss){node.push(new TextNode(s.substr(ss),literalMode,this))}};Template.prototype.get=function(d,param,element,deep){++deep;if(this._maintemplate==this&&element!=undefined){jQuery.removeData(element,"jTemplatesRef")}var $T=d,_param1,_param2;this.EvalObj=new EvalClass(this);if(this.settings.clone_data){$T=this.f_cloneData(d,{escapeData:(this.settings.filter_data&&deep==1),noFunc:this.settings.disallow_functions},this.f_escapeString)}if(!this.settings.clone_params){_param1=this._param;_param2=param}else{_param1=this.f_cloneData(this._param,{escapeData:(this.settings.filter_params),noFunc:false},this.f_escapeString);_param2=this.f_cloneData(param,{escapeData:(this.settings.filter_params&&deep==1),noFunc:false},this.f_escapeString)}var $P=jQuery.extend({},_param1,_param2);var $Q=(element!=undefined)?(element):({});$Q.version=this.version;var ret="";for(var i=0,l=this._tree.length;i<l;++i){ret+=this._tree[i].get($T,$P,$Q,deep)}this.EvalObj=null;--deep;return ret};Template.prototype.setParam=function(name,value){this._param[name]=value};TemplateUtils=function(){};TemplateUtils.escapeHTML=function(txt){return txt.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};TemplateUtils.cloneData=function(d,filter,f_escapeString){if(d==null){return d}switch(d.constructor){case Object:var o={};for(var i in d){o[i]=TemplateUtils.cloneData(d[i],filter,f_escapeString)}if(!filter.noFunc){if(d.hasOwnProperty("toString")){o.toString=d.toString}}return o;case Array:var o=[];for(var i=0,l=d.length;i<l;++i){o[i]=TemplateUtils.cloneData(d[i],filter,f_escapeString)}return o;case String:return(filter.escapeData)?(f_escapeString(d)):(d);case Function:if(filter.noFunc){if(Template.DEBUG_MODE){throw new Error("jTemplates: Functions are not allowed.")}else{return undefined}}default:return d}};TemplateUtils.optionToObject=function(optionText){if(optionText===null||optionText===undefined){return{}}var o=optionText.split(/[= ]/);if(o[0]===""){o.shift()}var obj={};for(var i=0,l=o.length;i<l;i+=2){obj[o[i]]=o[i+1]}return obj};TemplateUtils.parseJSON=function(data){if(typeof data!=="string"||!data){return null}try{return(new Function("return "+jQuery.trim(data)))()}catch(e){if(Template.DEBUG_MODE){throw new Error("jTemplates: Invalid JSON")}return{}}};TemplateUtils.ReturnRefValue=function(el,guid,id){while(true){if(el==null){return null}var d=jQuery.data(el,"jTemplatesRef");if(d!=undefined&&d.guid==guid&&d.d[id]!=undefined){return d.d[id]}el=el.parentNode}};var TextNode=function(val,literalMode,template){this._value=val;this._literalMode=literalMode;this._template=template};TextNode.prototype.get=function(d,param,element,deep){if(this._literalMode){return this._value}var s=this._value;var result="";var i=-1;var nested=0;var sText=-1;var sExpr=0;while(true){var lm=s.indexOf("{",i+1);var rm=s.indexOf("}",i+1);if(lm<0&&rm<0){break}if((lm!=-1&&lm<rm)||(rm==-1)){i=lm;if(++nested==1){sText=lm;result+=s.substring(sExpr,i);sExpr=-1}}else{i=rm;if(--nested===0){if(sText>=0){result+=this._template.EvalObj.evaluateContent(d,param,element,s.substring(sText,rm+1));sText=-1;sExpr=i+1}}else{if(nested<0){nested=0}}}}if(sExpr>-1){result+=s.substr(sExpr)}return result};EvalClass=function(t){this.__templ=t};EvalClass.prototype.evaluateContent=function($T,$P,$Q,__value){try{var result=eval(__value);if(jQuery.isFunction(result)){if(this.__templ.settings.disallow_functions||!this.__templ.settings.runnable_functions){return""}result=result($T,$P,$Q)}return(result===undefined)?(""):(String(result))}catch(e){if(Template.DEBUG_MODE){if(e instanceof JTException){e.type="subtemplate"}throw e}return""}};EvalClass.prototype.evaluate=function($T,$P,$Q,__value){return eval(__value)};var opIF=function(oper,par,templ){this._parent=par;oper.match(/\{#(?:else)*if (.*?)\}/);this._cond=RegExp.$1;this._onTrue=[];this._onFalse=[];this._currentState=this._onTrue;this._templ=templ};opIF.prototype.push=function(e){this._currentState.push(e)};opIF.prototype.getParent=function(){return this._parent};opIF.prototype.switchToElse=function(){this._currentState=this._onFalse};opIF.prototype.get=function(d,param,element,deep){var ret="";try{var arr=(this._templ.EvalObj.evaluate(d,param,element,this._cond))?(this._onTrue):(this._onFalse);for(var i=0,l=arr.length;i<l;++i){ret+=arr[i].get(d,param,element,deep)}}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}}return ret};opFORFactory=function(oper,par,template){if(oper.match(/\{#for (\w+?) *= *(\S+?) +to +(\S+?) *(?:step=(\S+?))*\}/)){var f=new opFOREACH(null,par,template);f._name=RegExp.$1;f._option={begin:(RegExp.$2||0),end:(RegExp.$3||-1),step:(RegExp.$4||1),extData:"$T"};f._runFunc=(function(i){return i});return f}else{throw new Error('jTemplates: Operator failed "find": '+oper)}};var opFOREACH=function(oper,par,template){this._parent=par;this._template=template;if(oper!=null){oper.match(/\{#foreach +(.+?) +as +(\w+?)( .+)*\}/);this._arg=RegExp.$1;this._name=RegExp.$2;this._option=RegExp.$3||null;this._option=TemplateUtils.optionToObject(this._option)}this._onTrue=[];this._onFalse=[];this._currentState=this._onTrue};opFOREACH.prototype.push=function(e){this._currentState.push(e)};opFOREACH.prototype.getParent=function(){return this._parent};opFOREACH.prototype.switchToElse=function(){this._currentState=this._onFalse};opFOREACH.prototype.get=function(d,param,element,deep){try{var fcount=(this._runFunc===undefined)?(this._template.EvalObj.evaluate(d,param,element,this._arg)):(this._runFunc);if(fcount===$){throw new Error("jTemplate: Variable '$' cannot be used as loop-function")}var key=[];var mode=typeof fcount;if(mode=="object"){var arr=[];jQuery.each(fcount,function(k,v){key.push(k);arr.push(v)});fcount=arr}var extData=(this._option.extData!==undefined)?(this._template.EvalObj.evaluate(d,param,element,this._option.extData)):((d!=null)?(d):({}));if(extData==null){extData={}}var s=Number(this._template.EvalObj.evaluate(d,param,element,this._option.begin)||0),e;var step=Number(this._template.EvalObj.evaluate(d,param,element,this._option.step)||1);if(mode!="function"){e=fcount.length}else{if(this._option.end===undefined||this._option.end===null){e=Number.MAX_VALUE}else{e=Number(this._template.EvalObj.evaluate(d,param,element,this._option.end))+((step>0)?(1):(-1))}}var ret="";var i,l;if(this._option.count){var tmp=s+Number(this._template.EvalObj.evaluate(d,param,element,this._option.count));e=(tmp>e)?(e):(tmp)}if((e>s&&step>0)||(e<s&&step<0)){var iteration=0;var _total=(mode!="function")?(Math.ceil((e-s)/step)):undefined;var ckey,cval;var loopCounter=0;for(;((step>0)?(s<e):(s>e));s+=step,++iteration,++loopCounter){if(Template.DEBUG_MODE&&loopCounter>Template.FOREACH_LOOP_LIMIT){throw new Error("jTemplate: Foreach loop limit was exceed")}ckey=key[s];if(mode!="function"){cval=fcount[s]}else{cval=fcount(s);if(cval===undefined||cval===null){break}}if((typeof cval=="function")&&(this._template.settings.disallow_functions||!this._template.settings.runnable_functions)){continue}if((mode=="object")&&(ckey in Object)&&(cval===Object[ckey])){continue}var prevValue=extData[this._name];extData[this._name]=cval;extData[this._name+"$index"]=s;extData[this._name+"$iteration"]=iteration;extData[this._name+"$first"]=(iteration==0);extData[this._name+"$last"]=(s+step>=e);extData[this._name+"$total"]=_total;extData[this._name+"$key"]=(ckey!==undefined&&ckey.constructor==String)?(this._template.f_escapeString(ckey)):(ckey);extData[this._name+"$typeof"]=typeof cval;for(i=0,l=this._onTrue.length;i<l;++i){try{ret+=this._onTrue[i].get(extData,param,element,deep)}catch(ex){if(ex instanceof JTException){switch(ex.type){case"continue":i=l;break;case"break":i=l;s=e;break;default:throw ex}}else{throw ex}}}delete extData[this._name+"$index"];delete extData[this._name+"$iteration"];delete extData[this._name+"$first"];delete extData[this._name+"$last"];delete extData[this._name+"$total"];delete extData[this._name+"$key"];delete extData[this._name+"$typeof"];delete extData[this._name];extData[this._name]=prevValue}}else{for(i=0,l=this._onFalse.length;i<l;++i){ret+=this._onFalse[i].get(d,param,element,deep)}}return ret}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}return""}};var JTException=function(type){this.type=type};JTException.prototype=Error;JTException.prototype.get=function(d){throw this};var Include=function(oper,includes,templ){oper.match(/\{#include (.*?)(?: root=(.*?))?\}/);this._template=includes[RegExp.$1];if(this._template==undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Cannot find include: "+RegExp.$1)}}this._root=RegExp.$2;this._mainTempl=templ};Include.prototype.get=function(d,param,element,deep){try{return this._template.get(this._mainTempl.EvalObj.evaluate(d,param,element,this._root),param,element,deep)}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}}return""};var UserParam=function(oper,templ){oper.match(/\{#param name=(\w*?) value=(.*?)\}/);this._name=RegExp.$1;this._value=RegExp.$2;this._templ=templ};UserParam.prototype.get=function(d,param,element,deep){try{param[this._name]=this._templ.EvalObj.evaluate(d,param,element,this._value)}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}param[this._name]=undefined}return""};var UserVariable=function(oper,templ){oper.match(/\{#var (.*?)\}/);this._id=RegExp.$1;this._templ=templ};UserVariable.prototype.get=function(d,param,element,deep){try{if(element==undefined){return""}var obj=this._templ.EvalObj.evaluate(d,param,element,this._id);var refobj=jQuery.data(element,"jTemplatesRef");if(refobj==undefined){refobj={guid:++Template.guid,d:[]}}var i=refobj.d.push(obj);jQuery.data(element,"jTemplatesRef",refobj);return"(TemplateUtils.ReturnRefValue(this,"+refobj.guid+","+(i-1)+"))"}catch(e){if(Template.DEBUG_MODE||(e instanceof JTException)){throw e}return""}};var Cycle=function(oper){oper.match(/\{#cycle values=(.*?)\}/);this._values=eval(RegExp.$1);this._length=this._values.length;if(this._length<=0){throw new Error("jTemplates: cycle has no elements")}this._index=0;this._lastSessionID=-1};Cycle.prototype.get=function(d,param,element,deep){var sid=jQuery.data(element,"jTemplateSID");if(sid!=this._lastSessionID){this._lastSessionID=sid;this._index=0}var i=this._index++%this._length;return this._values[i]};jQuery.fn.setTemplate=function(s,includes,settings){if(s.constructor===Template){return jQuery(this).each(function(){jQuery.data(this,"jTemplate",s);jQuery.data(this,"jTemplateSID",0)})}else{return jQuery(this).each(function(){jQuery.data(this,"jTemplate",new Template(s,includes,settings));jQuery.data(this,"jTemplateSID",0)})}};jQuery.fn.setTemplateURL=function(url_,includes,settings){var s=jQuery.ajax({url:url_,dataType:"text",async:false,type:"GET"}).responseText;return jQuery(this).setTemplate(s,includes,settings)};jQuery.fn.setTemplateElement=function(elementName,includes,settings){var s=jQuery("#"+elementName).val();if(s==null){s=jQuery("#"+elementName).html();s=s.replace(/&lt;/g,"<").replace(/&gt;/g,">")}s=jQuery.trim(s);s=s.replace(/^<\!\[CDATA\[([\s\S]*)\]\]>$/im,"$1");s=s.replace(/^<\!--([\s\S]*)-->$/im,"$1");return jQuery(this).setTemplate(s,includes,settings)};jQuery.fn.hasTemplate=function(){var count=0;jQuery(this).each(function(){if(jQuery.getTemplate(this)){++count}});return count};jQuery.fn.removeTemplate=function(){jQuery(this).processTemplateStop();return jQuery(this).each(function(){jQuery.removeData(this,"jTemplate")})};jQuery.fn.setParam=function(name,value){return jQuery(this).each(function(){var t=jQuery.getTemplate(this);if(t===undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Template is not defined.")}else{return }}t.setParam(name,value)})};jQuery.fn.processTemplate=function(d,param,options){return jQuery(this).each(function(){var t=jQuery.getTemplate(this);if(t===undefined){if(Template.DEBUG_MODE){throw new Error("jTemplates: Template is not defined.")}else{return }}if(options!=undefined&&options.StrToJSON){d=t.f_parseJSON(d)}jQuery.data(this,"jTemplateSID",jQuery.data(this,"jTemplateSID")+1);jQuery(this).html(t.get(d,param,jQuery.extend(true,{},this),0))})};jQuery.fn.processTemplateURL=function(url_,param,options){var that=this;var o=jQuery.extend({cache:false},jQuery.ajaxSettings);o=jQuery.extend(o,options);jQuery.ajax({url:url_,type:o.type,data:o.data,dataFilter:o.dataFilter,async:o.async,cache:o.cache,timeout:o.timeout,dataType:"text",success:function(d){var r=jQuery(that).processTemplate(d,param,{StrToJSON:true});if(o.on_success){o.on_success(r)}},error:o.on_error,complete:o.on_complete});return this};var Updater=function(url,param,interval,args,objs,options){this._url=url;this._param=param;this._interval=interval;this._args=args;this.objs=objs;this.timer=null;this._options=options||{};var that=this;jQuery(objs).each(function(){jQuery.data(this,"jTemplateUpdater",that)});this.run()};Updater.prototype.run=function(){this.detectDeletedNodes();if(this.objs.length==0){return }var that=this;jQuery.ajax({url:this._url,dataType:"text",data:this._args,cache:false,success:function(d){try{var r=jQuery(that.objs).processTemplate(d,that._param,{StrToJSON:true});if(that._options.on_success){that._options.on_success(r)}}catch(ex){}}});this.timer=setTimeout(function(){that.run()},this._interval)};Updater.prototype.detectDeletedNodes=function(){this.objs=jQuery.grep(this.objs,function(o){if(jQuery.browser.msie){var n=o.parentNode;while(n&&n!=document){n=n.parentNode}return n!=null}else{return o.parentNode!=null}})};jQuery.fn.processTemplateStart=function(url,param,interval,args,options){return new Updater(url,param,interval,args,this,options)};jQuery.fn.processTemplateStop=function(){return jQuery(this).each(function(){var updater=jQuery.data(this,"jTemplateUpdater");if(updater==null){return }var that=this;updater.objs=jQuery.grep(updater.objs,function(o){return o!=that});jQuery.removeData(this,"jTemplateUpdater")})};jQuery.extend({createTemplate:function(s,includes,settings){return new Template(s,includes,settings)},createTemplateURL:function(url_,includes,settings){var s=jQuery.ajax({url:url_,dataType:"text",async:false,type:"GET"}).responseText;return new Template(s,includes,settings)},getTemplate:function(element){return jQuery.data(element,"jTemplate")},processTemplateToText:function(template,data,parameter){return template.get(data,parameter,undefined,0)},jTemplatesDebugMode:function(value){Template.DEBUG_MODE=value}})})(jQuery)}jQuery.fn.extend({everyTime:function(B,C,D,E,A){return this.each(function(){jQuery.timer.add(this,B,C,D,E,A)})},oneTime:function(A,B,C){return this.each(function(){jQuery.timer.add(this,A,B,C,1)})},stopTime:function(A,B){return this.each(function(){jQuery.timer.remove(this,A,B)})}});jQuery.event.special;jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1000,das:10000,hs:100000,ks:1000000},timeParse:function(C){if(C==undefined||C==null){return null}var A=this.regex.exec(jQuery.trim(C.toString()));if(A[2]){var B=parseFloat(A[1]);var D=this.powers[A[2]]||1;return B*D}else{return C}},add:function(E,C,H,G,B,F){var A=0;if(jQuery.isFunction(H)){if(!B){B=G}G=H;H=C}C=jQuery.timer.timeParse(C);if(typeof C!="number"||isNaN(C)||C<=0){return }if(B&&B.constructor!=Number){F=!!B;B=0}B=B||0;F=F||false;var D=jQuery.data(E,this.dataKey)||jQuery.data(E,this.dataKey,{});if(!D[H]){D[H]={}}G.timerID=G.timerID||this.guid++;var I=function(){if(F&&this.inProgress){return }this.inProgress=true;if((++A>B&&B!==0)||G.call(E,A)===false){jQuery.timer.remove(E,H,G)}this.inProgress=false};I.timerID=G.timerID;if(!D[H][G.timerID]){D[H][G.timerID]=window.setInterval(I,C)}this.global.push(E)},remove:function(C,B,D){var E=jQuery.data(C,this.dataKey),A;if(E){if(!B){for(B in E){this.remove(C,B,D)}}else{if(E[B]){if(D){if(D.timerID){window.clearInterval(E[B][D.timerID]);delete E[B][D.timerID]}}else{for(var D in E[B]){window.clearInterval(E[B][D]);delete E[B][D]}}for(A in E[B]){break}if(!A){A=null;delete E[B]}}}for(A in E){break}if(!A){jQuery.removeData(C,this.dataKey)}}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(A,B){jQuery.timer.remove(B)})});jQuery.fn.extend({OpenModalDiv:function(){var E,G;E=window.screen.availWidth;if(window.screen.availHeight>document.body.scrollHeight){G=window.screen.availHeight}else{G=document.body.scrollHeight+20}var B=$(document).width();var L=$(document).height();E=E>B?E:B;G=G>L?G:L;var I=document.createElement("div");I.setAttribute("id","PgModalDiv");I.style.position="absolute";I.style.top="0";I.style.left="0";I.style.background="#dddddd";I.style.filter="Alpha(opacity=70);";I.style.opacity="0.7";I.style.width=E+"px";I.style.height=G+"px";I.style.zIndex="10000";$("body").attr("scroll","no");document.body.appendChild(I);$("#PgModalDiv").data("divbox_selectlist",$("select:visible"));$("select:visible").hide();$("#PgModalDiv").attr("divbox_scrolltop",$.ScrollPosition().Top);$("#PgModalDiv").attr("divbox_scrollleft",$.ScrollPosition().Left);$("#PgModalDiv").attr("htmloverflow",$("html").css("overflow"));$("html").css("overflow","hidden");window.scrollTo($("#PgModalDiv").attr("divbox_scrollleft"),$("#PgModalDiv").attr("divbox_scrolltop"));var A=this.width();var M=this.height();A=parseInt(A);M=parseInt(M);var D=$.PageSize().Width;var P=$.PageSize().Height;var F=$.ScrollPosition().Left;var N=$.ScrollPosition().Top;var H=N+(P/2)-(M/2);var C=F+(D/2)-(A/2);this.css("position","absolute");this.css("z-index","10001");this.css("left",C+"px");this.css("top",H+"px");if($.browser.mozilla){this.show();return }var J=this;$(window).resize(function(){if($(J).is(":visible")){$.CenterDiv(J)}});var O=navigator.userAgent;var K=false;if(O.indexOf("iPad")!=-1||O.indexOf("iPhone")!=-1||O.indexOf("iTouch")!=-1){K=true}if(!K){$(window).scroll(function(){if($(J).is(":visible")){$.CenterDiv(J)}})}this.show()},CloseModalDiv:function(){this.hide();if($("#PgModalDiv").length>0){$("html").css("overflow",$("#PgModalDiv").attr("htmloverflow"));var C=$("#PgModalDiv").attr("divbox_scrolltop");var B=$("#PgModalDiv").attr("divbox_scrollleft");window.setTimeout(function(){window.scrollTo(B,C)},25);var A=$("#PgModalDiv").data("divbox_selectlist");if(A){A.show()}$("#PgModalDiv").remove()}}});$.extend({PageSize:function(){var B=0;var A=0;B=window.innerWidth!=null?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body!=null?document.body.clientWidth:null;A=window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:null;return{Width:B,Height:A}},ScrollPosition:function(){var B=0,A=0;if($.browser.mozilla){B=window.pageYOffset;A=window.pageXOffset}else{if($.browser.msie){B=document.documentElement.scrollTop;A=document.documentElement.scrollLeft}else{if(document.body){B=document.body.scrollTop;A=document.body.scrollLeft}}}return{Top:B,Left:A}},CenterDiv:function(C){var A=document.documentElement.clientWidth;var E=document.documentElement.clientHeight;var D=$(C).height();var B=$(C).width();$(C).css({top:(E-D)/2+$(document).scrollTop(),left:(A-B)/2+$(document).scrollLeft()})},verticalCenterDiv:function(A){var C=document.documentElement.clientHeight;var B=$(A).height();$(A).css({top:(C-B)/2+$(document).scrollTop()})}});(function(x,AA){function y(){}function i(A){z=[A]}function p(A){w.insertBefore(A,w.firstChild)}function q(A,C,B){return A&&A.apply(C.context||C,B)}function r(A){return/\?/.test(A)?"&":"?"}var o="async",j="charset",l="",AD="error",k="_jqjsp",f="on",n=f+"click",m=f+AD,AB=f+"load",t=f+"readystatechange",c="removeChild",v="<script/>",g="success",d="timeout",e=x.browser,w=x("head")[0]||document.documentElement,h={},s=0,z,u={callback:k,url:location.href};function AC(P){P=x.extend({},u,P);var B=P.complete,N=P.dataFilter,F=P.callbackParameter,A=P.callback,L=P.cache,I=P.pageCache,J=P.charset,O=P.url,G=P.data,C=P.timeout,D,H=0,K=y;P.abort=function(){!H++&&K()};if(q(P.beforeSend,P,[P])===false||H){return P}O=O||l;G=G?((typeof G)=="string"?G:x.param(G,P.traditional)):l;O+=G?(r(O)+G):l;F&&(O+=r(O)+encodeURIComponent(F)+"=?");!L&&!I&&(O+=r(O)+"_"+(new Date()).getTime()+"=");O=O.replace(/=\?(&|$)/,"="+A+"$1");function E(Q){!H++&&AA(function(){K();I&&(h[O]={s:[Q]});N&&(Q=N.apply(P,[Q]));q(P.success,P,[Q,g]);q(B,P,[P,g])},0)}function M(Q){!H++&&AA(function(){K();I&&Q!=d&&(h[O]=Q);q(P.error,P,[P,Q]);q(B,P,[P,Q])},0)}I&&(D=h[O])?(D.s?E(D.s[0]):M(D)):AA(function(S,T,R){if(!H){R=C>0&&AA(function(){M(d)},C);K=function(){R&&clearTimeout(R);S[t]=S[n]=S[AB]=S[m]=null;w[c](S);T&&w[c](T)};window[A]=i;S=x(v)[0];S.id=k+s++;if(J){S[j]=J}function Q(U){(S[n]||y)();U=z;z=undefined;U?E(U[0]):M(AD)}if(e.msie){S.event=n;S.htmlFor=S.id;S[t]=function(){/loaded|complete/.test(S.readyState)&&Q()}}else{S[m]=S[AB]=Q;e.opera?((T=x(v)[0]).text="jQuery('#"+S.id+"')[0]."+m+"()"):S[o]=o}S.src=O;p(S);T&&p(T)}},0);return P}AC.setup=function(A){x.extend(u,A)};x.jsonp=AC})(jQuery,setTimeout);(function(){var A=function(B){this.shareTplId=B;this.defaultJsonpOps={data:{},url:"",type:"POST",timeout:20000,success:function(){},error:function(){},complete:function(){}}};A.prototype={getDataFromSubDomain:function(B,G,E){var D=null;if(!E){E="http://www.chinaso.com/common_demo/pg_cd_proxy.html"}var F=this;var C=F.shareTplId;F._setDomain();F.createIframe("crossDomainIfram",E,function(){var H=document.getElementById("crossDomainIfram").contentWindow.$;H.get(B,function(I){G(I)})})},_setDomain:function(){var B=$('<script type="text/javascript">document.domain="chinaso.com";<\/script>');$("head").append(B)},createIframe:function(F,C,E){var B=$('<iframe src="'+C+'" id="'+F+'" style="display:none"/>');$("body").append(B);var D=B[0];this._bindOnloadEvent("load",D,E)},_bindOnloadEvent:function(B,C,D){if(C.attachEvent){C.attachEvent("on"+B,function(){D()})}else{C.addEventListener(B,function(){D()},false)}},getJsonpData:function(B){if(typeof jQuery!="undefined"){B=$.extend(this.defaultJsonpOps,B);if(jQuery.jsonp){var C=B.url;if(C.indexOf("?")!=-1){C=C+"&jsonpcallback=?"}else{C=C+"?jsonpcallback=?"}$.jsonp({data:B.data,timeout:B.timeout,url:C,contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(D){B.success(D)},error:function(D){B.error(D)},complete:function(D){B.complete(D)}})}else{$.ajax({data:B.data,dataType:"jsonp",type:B.type,jsonp:"jsonpcallback",contentType:"application/x-www-form-urlencoded; charset=utf-8",timeout:B.timeout,url:B.url,success:function(D){B.success(D)}})}}else{alert("未加载基础jquery库")}}};if(!window.pg){window.pg={}}window.pg.crossDomain=new A("PgShareTpl")})();(function(){var A=function(){};A.prototype={createResult:function(C,D){var B={code:C,msg:D};return B},isValidPhone:function(C,G,F){pnum=$.trim(C);var E=null;if(pnum.length<1){E=this.createResult(false,"请输入手机号码")}else{var D=/^1[3-9]\d{9}$/;var B=D.test(pnum);if(!B){E=this.createResult(false,"请输入正确手机号码")}else{E=this.createResult(true,"")}}if(G){if(F){G.call(this,E,F)}else{G.call(this,E)}}return E},checkRandCode:function(C,F,E){var B=$.trim(C);var D=null;if(B.length<1){D=this.createResult(false,"请输入验证码")}else{if(C.length!=4){D=this.createResult(false,"验证码只能为4位数字")}else{D=this.createResult(true,"")}}if(F){if(E){F.call(this,D,E)}else{F.call(this,D)}}return D}};if(!window.pg){window.pg={}}window.pg.validate=new A()})();(function(A){A.fn.maxlength=function(B){if(typeof B=="string"){B={feedback:B}}B=A.extend({},A.fn.maxlength.defaults,B);function C(D){var E=D.value;if(B.words){E=D.value.length?E.split(/\s+/):{length:0}}return E.length}return this.each(function(){var I=this,H=A(I),G=A(I.form),F=B.useInput?G.find("input[name=maxlength]").val():H.attr("maxlength"),J=G.find(B.feedback);function E(M){var K=C(this),N=K>=F,L=M.keyCode;if(!N){return }switch(L){case 8:case 9:case 17:case 36:case 35:case 37:case 38:case 39:case 40:case 46:case 65:return ;default:return B.words&&L!=32&&L!=13&&K==F}}var D=function(){var K=C(I),L=F-K;J.html(L||"0");if(B.hardLimit&&L<0){I.value=B.words?I.value.split(/(\s+)/,(F*2)-1).join(""):I.value.substr(0,F);D()}};H.keyup(D).change(D);if(B.hardLimit){H.keydown(E)}D()})};A.fn.maxlength.defaults={useInput:false,hardLimit:true,feedback:".charsLeft",words:false}})(jQuery);(function(){var A=function(){};A.prototype={changeFuncTip:function(C,F,D){var B=C;var E=B.value;if(D=="focus"){if(E==F){B.value=""}}else{if(D=="blur"){if(E==""){B.value=F}}}},hideInputTip:function(B){B.html("");B.hide()},showInputTip:function(C,B){C.html(B);C.show()},hideAllWarningTips:function(B){var C=this;B.each(function(){C.hideInputTip($(this))})},changeImgRandCode:function(C,B){C.attr("src",B)},setImgSize:function(E,G,D,F,B){G=parseInt(G);D=parseInt(D);F=parseInt(F);B=parseInt(B);var C={width:G,height:D};if(C.width>0&&C.height>0){if(C.width/C.height>=F/B){if(C.width>F){E.width(F);E.height((C.height*F)/C.width)}else{E.width(C.width);E.height(C.height)}}else{if(C.height>B){E.height(B);E.width((C.width*B)/C.height)}else{E.width(C.width);E.height(C.height)}}}},onlyPermitNumber:function(B){try{var C=B;if(C.ctrlKey&&C.which==67||C.which==10){return true}if(C.ctrlKey&&C.which==86||C.which==10){return true}if(C.ctrlKey&&C.which==88||C.which==10){return true}if(C.keyCode==46||C.keyCode==229||C.keyCode==8||C.keyCode==37||C.keyCode==39||C.keyCode==9||C.keyCode==13){return true}if(C.keyCode>95&&C.keyCode<107){return true}if(C.keyCode>47&&C.keyCode<60){return true}return false}catch(C){}}};if(!window.pg){window.pg={}}window.pg.uitools=new A()})();(function(){var B={smgPath:"http://www.chinaso.com/sendmsg",productType:"",serviceid:"",flag:"0",ssoinit:false,msgType:"SMS",recordLog:false,randCodeWaitTime:120,closeWaitTime:7,smgTplId:"pg_smsgtpl",tplURL:"http://www.chinaso.com/common/component/sendmsg/tpl/sendsmg.html",cdURL:"http://www.chinaso.com/common_demo/pg_cd_proxy.html"};var D={md5:"",sendMsgTitle:"",sendMsgContent:"",imgURL:"",imgWidth:0,imgHeight:0,showMsgTitle:"",showMsgContent:"",showMsgSourceURL:"",panguTokenName:"盘古搜索",panguTokenURL:"m.chinaso.com",afterSendLogData:{},afterSendLogURL:"",beforeOpen:function(){},afterClose:function(){},beforeSendRandcode:function(){},afterSendRandcode:function(){},beforeSendMsg:function(){},afterSendMsg:function(){},onSuccessSendMsg:null,sessionExpired:function(){}};var F=D;var E=function(G){this.conf=$.extend(B,G);var H=this.conf.smgPath;this.url={initSendMsgURL:H+"/sendmsg.htm?m=init",getImgRandCodeURL:H+"/img.htm?m=imgcode&sid=",sendPhoneRandCodeURL:H+"/sendmsg.htm?m=smscode",sendSMSURL:H+"/sendmsg.htm?m=sendsms",sendMMSURL:H+"/sendmsg.htm?m=sendmms"};if(this.conf.ssoinit){this.url.initSendMsgURL=H+"/initsso.htm?m=init"}};E.prototype={initTpl:function(I,G,H){$("<div id = "+I+"></div>").appendTo($("body")).setTemplateURL(G).processTemplate(H)},initTplcdomain:function(I,G,H){pg.crossDomain.getDataFromSubDomain(G,function(J){$("<div id = "+I+"></div>").html(J).appendTo($("body"))},H)},log:function(G,H){var J=this;if(J.conf.recordLog){var I={url:G,data:H,type:"GET",timeout:20000,success:function(){},error:function(){},complete:function(){}};pg.crossDomain.getJsonpData(I)}},changeWarningTip:function(G,H){if(G.code){H.html(G.msg);H.hide()}else{H.html(G.msg);H.show()}},showNtlSendSuccessBox:function(){var G=this;$("#smsg_ntl").hide();$("#smsg_fillDataForm").hide();$("#smsg_success").show();$(document).removeData($("#smsg_mck").val());$.CenterDiv(document.getElementById("pg_smsg_wrapper"));this._startSuccessTimer()},showLgdSendSuccessBox:function(){var G=this;$("#smsg_fillDataForm").hide();$("#smsg_success").show();$(document).removeData($("#smsg_mck").val());$.CenterDiv(document.getElementById("pg_smsg_wrapper"));G._startSuccessTimer()},isloginState:function(H){var G=this;$.ajax({data:{},dataType:"jsonp",type:"GET",jsonp:"jsonpcallback",contentType:"application/x-www-form-urlencoded; charset=utf-8",timeout:20000,url:G.url.initSendMsgURL,success:function(I){if(I.flag==0){F.sessionExpired.call(this);return }else{H()}}})},_initAfterSendRcBox:function(){pg.uitools.hideInputTip($("#smsg_ntl_phone_tip"));pg.uitools.hideInputTip($("#smsg_ntl_randCode_tip"));$("#smsg_ntl_rc_area").show();$("#smsg_ntl_sub_area").show();if($(document).data($("#smsg_mck").val()+"f2")==undefined){$("#smsg_ntl_phone").attr({disabled:false});$("#smsg_get_randbtn").attr({disabled:false});$("#smsg_get_randbtn").removeClass("dis_getRandBtn")}else{$("#smsg_ntl_phone").attr({disabled:true});$("#smsg_get_randbtn").attr({disabled:true});$("#smsg_get_randbtn").addClass("dis_getRandBtn")}},cleanSmsgBox:function(G){var H=this;$(".warning").html("").hide();$(".smsg_input").each(function(){var I=$(this).attr("dt");if(I){$(this).val(I)}else{$(this).val("")}});H.clearMsgData();$("#smsg_msg_content").val("");$("#smsg_mck").val("");$(document).stopTime("smsg_success_closeTimer");$("#smsg_close_counter").html(H.conf.closeWaitTime);$("#smsg_success").hide();$("#smsg_fillDataForm").show();$("#smsg_ntl_phone").attr({disabled:false});$("#smsg_get_randbtn").attr({disabled:false});$("#smsg_get_randbtn").removeClass("dis_getRandBtn");$("#smsg_ntl_rc_area").hide();$("#smsg_ntl_sub_area").hide();$("#smsg_ntl_counter").html("");if(G){$("#pg_smsg_wrapper").unbind();$("#pg_smsg_wrapper").CloseModalDiv()}},isApple:function(){var G=navigator.userAgent;if(G.indexOf("iPad")!=-1||G.indexOf("iPhone")!=-1||G.indexOf("iTouch")!=-1){return true}else{return false}},initSmsgBox:function(H){var I=this;F=$.extend(D,H);F.beforeOpen.call(this);var G=F.md5;if($(document).data(G)==undefined){I.cleanSmsgBox(false);I.setMsgData(F)}else{I.setMsgData(F);$("#smsg_ntl_phone").val($(document).data(G));I._initAfterSendRcBox()}this.bindSmsgEvent();var H={data:{},url:I.url.initSendMsgURL,timeout:20000,success:function(L){sid=L.sid;isLogin=L.flag;if(L.flag==0){$("#pg_smsg_wrapper").OpenModalDiv();$("#smsg_ntl").show();$("#smsg_reg_mypangu").show();$("#smsg_lgd").hide();$("#smsg_success").hide();$("#smsg_note_tips").html("您将收到如下彩信：");I.initNlgBoxStyle();$.verticalCenterDiv(document.getElementById("pg_smsg_wrapper"));$(window).resize(function(){if($("#pg_smsg_wrapper").is(":visible")){$.CenterDiv(document.getElementById("pg_smsg_wrapper"))}});if(!I.isApple()){$(window).scroll(function(){if($("#pg_smsg_wrapper").is(":visible")){$.CenterDiv(document.getElementById("pg_smsg_wrapper"))}})}$(document).unbind("keyup").bind("keyup",function(N){if(N.keyCode=="13"){var M=document.activeElement.id;if(M=="smsg_ntl_phone"){if(!$("#smsg_get_randbtn").attr("disabled")){$("#smsg_get_randbtn").trigger("click")}}}})}else{if(L.flag==1){var J=L.mobile;var K=L.email;$("#pg_smsg_wrapper").OpenModalDiv();if($.trim(J).length>0){$("#smsg_lgd_phone").val(J)}$("#smsg_lgd").show();$("#smsg_ntl").hide();$("#smsg_reg_mypangu").hide();$("#smsg_success").hide();I.initLgdBoxStyle();if($.trim(J).length>0){$("#smsg_send_user").html("来自"+J)}else{if($.trim(K).length>0){$("#smsg_send_user").html("来自"+K)}}$("#smsg_note_tips").html("您或您的好友将收到如下彩信：");$.verticalCenterDiv(document.getElementById("pg_smsg_wrapper"));$(window).resize(function(){if($("#pg_smsg_wrapper").is(":visible")){$.CenterDiv(document.getElementById("pg_smsg_wrapper"))}});if(!I.isApple()){$(window).scroll(function(){if($("#pg_smsg_wrapper").is(":visible")){$.CenterDiv(document.getElementById("pg_smsg_wrapper"))}})}pg.uitools.changeImgRandCode($("#smsg_lgd_rcimg"),I.url.getImgRandCodeURL+sid+"&t="+new Date().getTime());$(document).unbind("keyup").bind("keyup",function(N){if(N.keyCode=="13"){var M=document.activeElement.id;if(M=="smsg_lgd_phone"||M=="smsg_lgd_randCode"){if(!$("#smsg_lgd_submit").attr("disabled")){$("#smsg_lgd_submit").trigger("click")}}}})}}},error:function(){}};pg.crossDomain.getJsonpData(H)},_sendRandCodeSuccess:function(){var G=this,H=G.conf;pg.uitools.hideAllWarningTips($("#smsg_ntl .warning"));$("#smsg_ntl_phone").attr({disabled:true});$("#smsg_get_randbtn").attr({disabled:true});$("#smsg_get_randbtn").addClass("dis_getRandBtn");$("#smsg_ntl_rc_area").show();$("#smsg_ntl_sub_area").show();$("#smsg_ntl_counter").html(H.randCodeWaitTime);var I=$("#smsg_mck").val();$(document).data(I,$("#smsg_ntl_phone").val());$(document).data(I+"f2",$("#smsg_ntl_phone").val());$(document).everyTime(1000,I,function(K){var J=H.randCodeWaitTime-K;if(J<=0){$(document).stopTime(I);if($("#smsg_ntl_rc_area").is(":visible")&&I==$("#smsg_mck").val()){$("#smsg_ntl_phone").attr({disabled:false});$("#smsg_get_randbtn").attr({disabled:false});$("#smsg_get_randbtn").removeClass("dis_getRandBtn");$("#smsg_ntl_counter").html("")}$(document).removeData(I+"f2")}else{if(I==$("#smsg_mck").val()){$("#smsg_ntl_counter").html(J)}}});$.CenterDiv(document.getElementById("pg_smsg_wrapper"));F.afterSendRandcode.call(this);$(document).unbind("keyup");$(document).bind("keyup",function(K){if(K.keyCode=="13"){var J=document.activeElement.id;if(J=="smsg_ntl_phone"){$("#smsg_get_randbtn").trigger("click")}else{if(J=="smsg_ntl_randCode"){$("#smsg_ntl_submit").trigger("click")}}}})},_startSuccessTimer:function(){var H=this;var G=H.conf;$(document).everyTime(1000,"smsg_success_closeTimer",function(J){var I=G.closeWaitTime-J;if(I==0){$(document).stopTime("smsg_success_closeTimer");$("#smsg_close_counter").html(G.closeWaitTime);H.cleanSmsgBox(true)}else{$("#smsg_close_counter").html(I)}})},bindSmsgEvent:function(){var H=this;$(".smsg_js_close").unbind("click").bind("click",function(){H.cleanSmsgBox(true);F.afterClose.call(this)});$(".smsg_js_funcTip").unbind("focus").bind("focus",function(){var I=$.trim($(this).attr("dt"));pg.uitools.changeFuncTip($(this)[0],I,"focus")}).unbind("blur").bind("blur",function(){var I=$.trim($(this).attr("dt"));pg.uitools.changeFuncTip($(this)[0],I,"blur")});$("#smsg_ntl_phone").bind("blur",function(){var I=$(this).val();if($.trim(I)=="请输入手机号码"){I=""}pg.validate.isValidPhone(I,H.changeWarningTip,$("#smsg_ntl_phone_tip"));$.CenterDiv(document.getElementById("pg_smsg_wrapper"))});var G=(("ontouchstart" in window)||(window.DocumentTouch&&document instanceof DocumentTouch))?"touchstart":"click";$("#smsg_get_randbtn").unbind(G).bind(G,function(){F.beforeSendRandcode.call(this);var J=$("#smsg_get_randbtn").attr("disabled");var K=$("#smsg_ntl_phone").attr("disabled");if(K==true||K=="disabled"||J==true||J=="disabled"){return }var I=$.trim($("#smsg_ntl_phone").val());if(I=="请输入手机号码"){I=""}var M=$("#smsg_mck").val();if(pg.validate.isValidPhone(I,H.changeWarningTip,$("#smsg_ntl_phone_tip")).code){$(this).attr({disabled:true});var L="";if(F.afterSendLogData){L=F.afterSendLogData.q||""}var N={data:{mobile:I,md5:M,q:L},url:H.url.sendPhoneRandCodeURL,timeout:20000,success:function(P){var O=P.flag;if(O==1){H._sendRandCodeSuccess()}else{if(O==2){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"手机号码格式不正确")}else{if(O==3){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"请输入手机号码")}else{if(O==0){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"您的发送数量已超过限制条数")}}}$("#smsg_get_randbtn").attr({disabled:false});$("#smsg_get_randbtn").removeClass("dis_getRandBtn")}},error:function(){$("#smsg_get_randbtn").attr({disabled:false})},complete:function(){}};pg.crossDomain.getJsonpData(N);$.CenterDiv(document.getElementById("pg_smsg_wrapper"))}});$("#smsg_ntl_submit").unbind("click").bind("click",function(){F.beforeSendMsg.call(this);var I=$.trim($("#smsg_ntl_phone").val());var L=$.trim($("#smsg_ntl_randCode").val());if(L=="请输入验证码"){L=""}if(I=="请输入手机号码"){I=""}var K=$("#smsg_msg_content").val();var N=$("#smsg_mck").val();if(!pg.validate.checkRandCode(L,H.changeWarningTip,$("#smsg_ntl_randCode_tip")).code||!pg.validate.isValidPhone(I,H.changeWarningTip,$("#smsg_ntl_phone_tip")).code){$.CenterDiv(document.getElementById("pg_smsg_wrapper"));return false}var J={mobile:I,smscode:L};J=$.extend(J,H.getSpecialData());var O=H.getSendMsgURL();var M={data:J,url:O,success:function(R){var Q=R.flag;document.getElementById("smsg_ntl_submit").disabled=false;if(Q==0){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"发送短信次数超过限制")}else{if(Q==2){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"手机号码格式不正确")}else{if(Q==3){pg.uitools.showInputTip($("#smsg_ntl_phone_tip"),"手机号码不能为空")}else{if(Q==6){pg.uitools.showInputTip($("#smsg_ntl_randCode_tip"),"验证码输入错误")}else{if(Q==7){pg.uitools.showInputTip($("#smsg_ntl_randCode_tip"),"此验证码已失效，请重新发送")}else{if(Q==1){$(".warning").html("").hide();$("#smsg_ntl_phone").attr({disabled:false});$("#smsg_get_randbtn").attr({disabled:false});$("#smsg_get_randbtn").removeClass("dis_getRandBtn");$("#ntLogin_randCode").hide();$("#ntLogin_sendMsg").hide();$(document).stopTime($("#smsg_mck").val());$("#smsg_ntl_counter").html("");if(F.onSuccessSendMsg){F.onSuccessSendMsg.call(H)}else{H.showNtlSendSuccessBox.call(H)}$(document).removeData($("#smsg_mck").val());var P=$.extend({},{se:I,api:"",clt:"share",sv:H.conf.msgType},F.afterSendLogData);F.afterSendMsg.call(this);H.log(F.afterSendLogURL,P)}}}}}}},error:function(){document.getElementById("smsg_ntl_submit").disabled=false}};pg.crossDomain.getJsonpData(M);$.CenterDiv(document.getElementById("pg_smsg_wrapper"))});$("#smsg_lgd_phone").bind("blur",function(){var I=$(this).val();if($.trim(I)=="请输入手机号码"){I=""}pg.validate.isValidPhone(I,H.changeWarningTip,$("#smsg_lgd_phone_tip"));$.CenterDiv(document.getElementById("pg_smsg_wrapper"))});$("#smsg_lgd_exchange_rc").unbind("click").bind("click",function(){pg.uitools.changeImgRandCode($("#smsg_lgd_rcimg"),H.url.getImgRandCodeURL+sid+"&t="+new Date().getTime());return false});$("#smsg_lgd_submit").unbind("click").bind("click",function(){F.beforeSendMsg.call(this);var I=$.trim($("#smsg_lgd_phone").val());var L=$.trim($("#smsg_lgd_randCode").val());if(L=="验证码"){L=""}if(I=="请输入手机号码"){I=""}var K=$("#smsg_msg_content").val();var N=$("#smsg_mck").val();if(!pg.validate.checkRandCode(L,H.changeWarningTip,$("#smsg_lgd_randCode_tip")).code||!pg.validate.isValidPhone(I,H.changeWarningTip,$("#smsg_lgd_phone_tip")).code){$.CenterDiv(document.getElementById("pg_smsg_wrapper"));return false}$("#smsg_lgd_submit").attr("disabled",true);var J={mobile:I,imgcode:L};J=$.extend(J,H.getSpecialData());var O=H.getSendMsgURL();var M={data:J,url:O,type:"GET",success:function(R){var Q=R.flag;if(Q==0){var T=R.n;T="<span class='red'>"+T+"</span>";var S="每个注册用户24小时内只能给好友发送"+T+"次短信";pg.uitools.showInputTip($("#smsg_lgd_phone_tip"),S)}else{if(Q==2){pg.uitools.showInputTip($("#smsg_lgd_phone_tip"),"手机号码格式不正确")}else{if(Q==3){pg.uitools.showInputTip($("#smsg_lgd_phone_tip"),"手机号码不能为空")}else{if(Q==8){pg.uitools.showInputTip($("#smsg_lgd_randCode_tip"),"验证码输入错误")}else{if(Q==9){pg.uitools.showInputTip($("#smsg_lgd_randCode_tip"),"此验证码已失效，请重新填写验证码");$("#smsg_lgd_exchange_rc").trigger("click")}else{if(Q==1){if(F.onSuccessSendMsg){F.onSuccessSendMsg.call(H)}else{H.showLgdSendSuccessBox.call(H)}var P=$.extend({},{se:I,api:"",clt:"share",sv:H.conf.msgType},F.afterSendLogData);H.log(F.afterSendLogURL,P);F.afterSendMsg.call(this)}}}}}}$("#smsg_lgd_submit").attr("disabled",false)},error:function(){$("#smsg_lgd_submit").attr("disabled",false)}};H.isloginState(function(){pg.crossDomain.getJsonpData(M)});$.CenterDiv(document.getElementById("pg_smsg_wrapper"))})},getSpecialData:function(){},getSendMsgURL:function(){},setMsgData:function(G){},initLgdBoxStyle:function(){},initNlgBoxStyle:function(){},clearMsgData:function(){}};var A=function(G){E.call(this,G);this.conf.msgType="SMS";this.initTplcdomain(this.conf.smgTplId,this.conf.tplURL,this.conf.cdURL)};A.prototype=new E();A.prototype.constructor=A;A.prototype.getSpecialData=function(){var G={msg:$("#smsg_msg_content").val(),md5:$("#smsg_mck").val(),subject:$("#smsg_sms_title").val(),flag:this.conf.flag,serviceid:this.conf.serviceid};return G};A.prototype.getSendMsgURL=function(){return this.url.sendSMSURL};A.prototype.initNlgBoxStyle=function(){$("#smsg_pg_bottom").removeClass("pg_bottom")};A.prototype.initLgdBoxStyle=function(){$("#smsg_pg_bottom").addClass("pg_bottom")};A.prototype.clearMsgData=function(){};A.prototype.setMsgData=function(G){if(G){$("#smsg_show_content").html(G.showMsgContent);var H=G.showMsgSourceURL;if(H.length>34){H=H.substring(0,34);H=H+"..."}$("#smsg_show_sourceurl").attr("href",G.showMsgSourceURL);$("#smsg_show_sourceurl").text(H);$("#pangu_token_name").html(G.panguTokenName);$("#pangu_token_url").html(G.panguTokenURL);$("#pangu_token_url").attr("href","http://"+G.panguTokenURL);$("#smsg_sms_title").val(G.sendMsgTitle);$("#smsg_msg_content").val(G.sendMsgContent);$("#smsg_mck").val(G.md5)}};var C=function(G){E.call(this,G);this.conf.msgType="MMS";this.initTplcdomain(this.conf.smgTplId,this.conf.tplURL,this.conf.cdURL)};C.prototype=new E();C.prototype.constructor=C;C.prototype.getSpecialData=function(){var G={msg:$("#smsg_msg_content").val(),md5:$("#smsg_mck").val(),subject:$("#smsg_mms_title").val(),imgurl:$("#smsg_mms_imgurl").val()};return G};C.prototype.getSendMsgURL=function(){return this.url.sendMMSURL};C.prototype.initLgdBoxStyle=function(){};C.prototype.clearMsgData=function(){$("#mms_show_img").attr("src","")};C.prototype.setMsgData=function(G){if(G){$("#mms_show_img").attr("src",G.imgURL);pg.uitools.setImgSize($("#mms_show_img"),G.imgWidth,G.imgHeight,200,150);$("#smsg_show_title").html(G.showMsgTitle);$("#smsg_show_content").html(G.showMsgContent);var H=G.showMsgSourceURL;if(H.length>34){H=H.substring(0,34);H=H+"..."}$("#smsg_show_sourceurl").attr("href",G.showMsgSourceURL);$("#smsg_show_sourceurl").text(H);$("#pangu_token_name").html(G.panguTokenName);$("#pangu_token_url").html(G.panguTokenURL);$("#pangu_token_url").attr("href","http://"+G.panguTokenURL);$("#smsg_mms_title").val(G.sendMsgTitle);$("#smsg_msg_content").val(G.sendMsgContent);$("#smsg_mms_imgurl").val(G.imgURL);$("#smsg_mck").val(G.md5)}};if(!window.pg){window.pg={}}window.pg.msg=E;window.pg.mms=C;window.pg.sms=A})();